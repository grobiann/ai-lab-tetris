# CLAUDE.md — AI Lab Tetris 프로젝트 규칙

이 파일은 프로젝트의 현재 게임 규칙과 개발 가이드라인을 정리합니다.
새로운 규칙이나 변경사항은 이 파일에 계속 업데이트합니다.

---

## 게임 규칙 (현재 구현 기준)

### 보드
- 크기: **10열 × 20행**
- 셀 크기: 30px

### 테트로미노 (7종)
| 이름 | 색상 | 설명 |
|------|------|------|
| I | 시안 `#00f5ff` | 4칸 직선 |
| O | 금색 `#ffd700` | 2×2 정사각형 |
| T | 보라 `#bf5fff` | T자형 |
| S | 초록 `#39ff14` | S자형 |
| Z | 빨강 `#ff3131` | Z자형 |
| J | 파랑 `#1e90ff` | J자형 |
| L | 주황 `#ff8c00` | L자형 |

### 피스 생성
- **7-bag 랜덤**: 7종 피스를 한 세트로 섞어 순서대로 제공 (같은 피스 연속 방지)
- 스폰 위치: 상단 중앙 (x = 3, y = 0)

### 회전
- SRS(Super Rotation System) 간소화 버전
- 시계 방향 회전 (↑ 키)
- 반시계 방향 회전 (Z 키)
- 벽 킥(Wall Kick): 오프셋 [0, -1, +1, -2, +2] 순서로 시도

### 낙하 & 조작
| 조작 | 키 | 설명 |
|------|----|------|
| 좌/우 이동 | ← → | 1칸씩 이동 |
| 소프트 드롭 | ↓ | 1칸 내리기 (+1점) |
| 하드 드롭 | Space | 즉시 바닥으로 (낙하 거리 × 2점) |
| 시계 회전 | ↑ | 시계 방향 회전 |
| 반시계 회전 | Z | 반시계 방향 회전 |
| 홀드 | C | 현재 피스 보관 (게임당 1회/피스) |
| 일시정지 | P | 게임 일시정지/재개 |
| 재시작 | R | 게임 재시작 |

### Lock Delay
- 피스가 바닥에 닿은 후 **500ms** 동안 이동/회전 가능
- 이동/회전 시 타이머 리셋 (최대 15회)
- 타이머 만료 또는 최대 리셋 도달 시 즉시 고정

### 점수 시스템
| 액션 | 점수 |
|------|------|
| 소프트 드롭 | 1점/칸 |
| 하드 드롭 | 2점/칸 |
| 1줄 클리어 | 100 × 레벨 |
| 2줄 클리어 | 300 × 레벨 |
| 3줄 클리어 | 500 × 레벨 |
| 4줄 클리어 (테트리스) | 800 × 레벨 |
| 콤보 보너스 | 50 × 콤보 수 × 레벨 |

### 레벨 & 속도
- 10줄 클리어마다 레벨 1 증가
- 낙하 속도: `max(80ms, 1000ms - (레벨-1) × 90ms)`
- 레벨 11 이상: 최소 속도 80ms 고정

### 홀드
- `C` 키로 현재 피스를 홀드 슬롯에 보관
- 홀드 중인 피스와 현재 피스 교환
- 피스를 고정(lock)하기 전까지 홀드는 1회만 사용 가능

### 고스트 피스
- 현재 피스가 떨어질 위치를 반투명 외곽선으로 표시

### 게임 오버
- 새 피스가 스폰될 때 이미 블록이 있으면 게임 오버
- 최고 점수는 `localStorage`에 저장

---

## 기술 스택
- **언어**: 순수 HTML5 / CSS3 / JavaScript (ES6+, 프레임워크 없음)
- **렌더링**: Canvas 2D API
- **폰트**: Google Fonts — Orbitron, Share Tech Mono
- **저장**: localStorage (최고 점수)
- **배포**: GitHub Pages (GitHub Actions 자동 배포)

## 파일 구조
```
ai-lab-tetris/
├── index.html                        # 게임 UI 구조
├── style.css                         # 다크 네온 테마 스타일
├── game.js                           # 게임 로직 전체
├── CLAUDE.md                         # 이 파일 (프로젝트 규칙)
└── .github/workflows/deploy.yml      # GitHub Pages 자동 배포
```

## 개발 가이드라인
- 게임 로직은 `game.js` 단일 파일에 유지
- 새 기능 추가 시 이 파일의 **게임 규칙** 섹션을 업데이트
- 색상/스타일 변경은 CSS 변수(`--cyan`, `--purple` 등) 활용
- `main` 브랜치 push 시 GitHub Pages 자동 배포
